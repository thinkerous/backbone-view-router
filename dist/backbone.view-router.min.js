/**
 * Backbone.View-Router v0.0.1
 * https://github.com/thinkerous/backbone-view-router
 *
 * Copyright (c) 2014 Chris J Leaf
 * Released under the MIT license
 */
!function(a){"use strict";var b="object"==typeof module&&"object"==typeof exports,c=b?{_:require("underscore"),Backbone:require("backbone"),Globalize:require("globalize")}:window;(b?exports:Backbone).Schema=a(c,b)}(function(a){"use strict";var b=a._,c=a.Backbone,d=c.ViewRouter=c.Router.extend({views:{},titles:{},buffered:!1,titleRoot:"",registerViews:function(a,c){b.each(a,function(a,b){b=b.replace(/\*.*$/,""),this.views[a]=b},this),b.extend(this.titles,c||{})},goToView:function(a,b,d){var e=this.revRoute(a,b),f=c.history.getFragment().replace(this._cleanFragment,"");return e!==f?(this.updateTitle(a,b),this.navigate(e,d)):void 0},revRoute:function(a,c){var d=this.views[a];if("undefined"==typeof d)throw'No matching route for "'+a+'" for given arguments.';var e=d.split(/\//);d=b.map(e,function(a){return a.replace(/^:([^()]+).*/,function(a,b){return""+c.get(b)})}).join("/");var f=d.match(/:[^\/?]*/);if(null!==f){var g="";throw b.each(f,function(a){g+=a.substr(1)+" "}),"Unmatched Route Elements: "+g}return d},updateTitle:function(a,b){var c=this.titleRoot+(this.titles[a]||"");document.title=c.replace(/<([A-Za-z_]+)>/g,function(a,c){return""+b.get(c)})},_cleanFragment:/\?.*$/,navigate:function(a,b){b=b||{query:""},b.query&&(a+=b.query||""),c.history.navigate(a,b)},_getUrl:function(){return c.history.location.pathname.substr(1)}});return b.extend(c,d),"undefined"!=typeof module&&(module.exports=d),c});