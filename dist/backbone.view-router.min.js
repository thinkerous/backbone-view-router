/**
 * Backbone.View-Router v0.0.1
 * https://github.com/thinkerous/backbone-view-router
 *
 * Copyright (c) 2014 Chris J Leaf
 * Released under the MIT license
 */
!function(a){"use strict";var b="object"==typeof module&&"object"==typeof exports,c=b?{_:require("underscore"),Backbone:require("backbone")}:window;(b?exports:Backbone).Schema=a(c,b)}(function(a){"use strict";var b=a._,c=a.Backbone,d=c.ViewRouter=c.Router.extend({views:{},titles:{},buffered:!1,titleRoot:null,registerViews:function(a,c){b.each(a,function(a,b){b=b.replace(/\*.*$/,""),this.views[a]=b},this),c&&null===this.titleRoot&&(this.titleRoot=""),b.extend(this.titles,c||{})},goToView:function(a,b,c){var d=this.revRoute(a,b);return this.updateTitle(a,b),this.navigate(d,c)},revRoute:function(a,c){var d=this.views[a];if("undefined"==typeof d)throw'No matching route for "'+a+'" for given arguments.';var e=d.split(/\//);return d=b.map(e,function(a){return a.replace(/^:([^()]+).*/,function(a,b){var d=c.get(b);if(!d)throw"Unmatched Route Element: "+b;return""+d})}).join("/")},updateTitle:function(a,b){if(null!==this.titleRoot){var c=this.titleRoot+(this.titles[a]||"");document.title=c.replace(/<([A-Za-z_]+)>/g,function(a,c){return""+b.get(c)})}},constructor:function(a){c.Router.prototype.constructor.apply(this,arguments),a&&a.titleRoot&&(this.titleRoot=a.titleRoot)}});return b.extend(c,d),"undefined"!=typeof module&&(module.exports=d),c});